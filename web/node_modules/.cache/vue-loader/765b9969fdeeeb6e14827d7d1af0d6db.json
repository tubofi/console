{"remainingRequest":"E:\\console\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\console\\web\\src\\view\\superAdmin\\authority\\authority.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\console\\web\\src\\view\\superAdmin\\authority\\authority.vue","mtime":1625854608000},{"path":"E:\\console\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\console\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\console\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\console\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOiOt+WPluWIl+ihqOWGheWuueWwgeijheWcqG1peGluc+WGhemDqCAgZ2V0VGFibGVEYXRh5pa55rOVIOWIneWni+WMluW3suWwgeijheWujOaIkAoKaW1wb3J0IHsKICBnZXRBdXRob3JpdHlMaXN0LAogIGRlbGV0ZUF1dGhvcml0eSwKICBjcmVhdGVBdXRob3JpdHksCiAgdXBkYXRlQXV0aG9yaXR5LAogIGNvcHlBdXRob3JpdHkKfSBmcm9tICdAL2FwaS9hdXRob3JpdHknCgppbXBvcnQgTWVudXMgZnJvbSAnQC92aWV3L3N1cGVyQWRtaW4vYXV0aG9yaXR5L2NvbXBvbmVudHMvbWVudXMnCmltcG9ydCBBcGlzIGZyb20gJ0Avdmlldy9zdXBlckFkbWluL2F1dGhvcml0eS9jb21wb25lbnRzL2FwaXMnCmltcG9ydCBEYXRhcyBmcm9tICdAL3ZpZXcvc3VwZXJBZG1pbi9hdXRob3JpdHkvY29tcG9uZW50cy9kYXRhcycKCmltcG9ydCBpbmZvTGlzdCBmcm9tICdAL21peGlucy9pbmZvTGlzdCcKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBdXRob3JpdHknLAogIGNvbXBvbmVudHM6IHsKICAgIE1lbnVzLAogICAgQXBpcywKICAgIERhdGFzCiAgfSwKICBtaXhpbnM6IFtpbmZvTGlzdF0sCiAgZGF0YSgpIHsKICAgIHZhciBtdXN0VWludCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKCEvXlswLTldKlsxLTldWzAtOV0qJC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXmraPmlbTmlbAnKSkKICAgICAgfQogICAgICByZXR1cm4gY2FsbGJhY2soKQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIEF1dGhvcml0eU9wdGlvbjogWwogICAgICAgIHsKICAgICAgICAgIGF1dGhvcml0eUlkOiAnMCcsCiAgICAgICAgICBhdXRob3JpdHlOYW1lOiAn5qC56KeS6ImyJwogICAgICAgIH0KICAgICAgXSwKICAgICAgbGlzdEFwaTogZ2V0QXV0aG9yaXR5TGlzdCwKICAgICAgZHJhd2VyOiBmYWxzZSwKICAgICAgZGlhbG9nVHlwZTogJ2FkZCcsCiAgICAgIGFjdGl2ZVJvdzoge30sCiAgICAgIGFjdGl2ZVVzZXJJZDogMCwKICAgICAgZGlhbG9nVGl0bGU6ICfmlrDlop7op5LoibInLAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIGFwaURpYWxvZ0ZsYWc6IGZhbHNlLAogICAgICBjb3B5Rm9ybToge30sCiAgICAgIGZvcm06IHsKICAgICAgICBhdXRob3JpdHlJZDogJycsCiAgICAgICAgYXV0aG9yaXR5TmFtZTogJycsCiAgICAgICAgcGFyZW50SWQ6ICcwJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIGF1dGhvcml0eUlkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6ImySUQnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiBtdXN0VWludCwgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIGF1dGhvcml0eU5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibLlkI0nLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgcGFyZW50SWQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nor7fmsYLmlrnlvI8nLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIHRoaXMucGFnZVNpemUgPSA5OTkKICAgIGF3YWl0IHRoaXMuZ2V0VGFibGVEYXRhKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGF1dG9FbnRlcihhY3RpdmVOYW1lLCBvbGRBY3RpdmVOYW1lKSB7CiAgICAgIGNvbnN0IHBhbmVBcnIgPSBbJ21lbnVzJywgJ2FwaXMnLCAnZGF0YXMnXQogICAgICBpZiAob2xkQWN0aXZlTmFtZSkgewogICAgICAgIGlmICh0aGlzLiRyZWZzW3BhbmVBcnJbb2xkQWN0aXZlTmFtZV1dLm5lZWRDb25maXJtKSB7CiAgICAgICAgICB0aGlzLiRyZWZzW3BhbmVBcnJbb2xkQWN0aXZlTmFtZV1dLmVudGVyQW5kTmV4dCgpCiAgICAgICAgICB0aGlzLiRyZWZzW3BhbmVBcnJbb2xkQWN0aXZlTmFtZV1dLm5lZWRDb25maXJtID0gZmFsc2UKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDmi7fotJ3op5LoibIKICAgIGNvcHlBdXRob3JpdHkocm93KSB7CiAgICAgIHRoaXMuc2V0T3B0aW9ucygpCiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAn5ou36LSd6KeS6ImyJwogICAgICB0aGlzLmRpYWxvZ1R5cGUgPSAnY29weScKICAgICAgZm9yIChjb25zdCBrIGluIHRoaXMuZm9ybSkgewogICAgICAgIHRoaXMuZm9ybVtrXSA9IHJvd1trXQogICAgICB9CiAgICAgIHRoaXMuY29weUZvcm0gPSByb3cKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICBvcGRlbmRyYXdlcihyb3cpIHsKICAgICAgdGhpcy5kcmF3ZXIgPSB0cnVlCiAgICAgIHRoaXMuYWN0aXZlUm93ID0gcm93CiAgICB9LAogICAgLy8g5Yig6Zmk6KeS6ImyCiAgICBkZWxldGVBdXRoKHJvdykgewogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xop5LoibIsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkKICAgICAgICAudGhlbihhc3luYygpID0+IHsKICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGRlbGV0ZUF1dGhvcml0eSh7IGF1dGhvcml0eUlkOiByb3cuYXV0aG9yaXR5SWQgfSkKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlRGF0YS5sZW5ndGggPT09IDEgJiYgdGhpcy5wYWdlID4gMSkgewogICAgICAgICAgICAgIHRoaXMucGFnZS0tCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAogICAgLy8g5Yid5aeL5YyW6KGo5Y2VCiAgICBpbml0Rm9ybSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuYXV0aG9yaXR5Rm9ybSkgewogICAgICAgIHRoaXMuJHJlZnMuYXV0aG9yaXR5Rm9ybS5yZXNldEZpZWxkcygpCiAgICAgIH0KICAgICAgdGhpcy5mb3JtID0gewogICAgICAgIGF1dGhvcml0eUlkOiAnJywKICAgICAgICBhdXRob3JpdHlOYW1lOiAnJywKICAgICAgICBwYXJlbnRJZDogJzAnCiAgICAgIH0KICAgIH0sCiAgICAvLyDlhbPpl63nqpflj6MKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLmluaXRGb3JtKCkKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICAgIHRoaXMuYXBpRGlhbG9nRmxhZyA9IGZhbHNlCiAgICB9LAogICAgLy8g56Gu5a6a5by556qXCgogICAgYXN5bmMgZW50ZXJEaWFsb2coKSB7CiAgICAgIGlmICh0aGlzLmZvcm0uYXV0aG9yaXR5SWQgPT09ICcwJykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIG1lc3NhZ2U6ICfop5LoibJpZOS4jeiDveS4ujAnCiAgICAgICAgfSkKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICB0aGlzLiRyZWZzLmF1dGhvcml0eUZvcm0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgc3dpdGNoICh0aGlzLmRpYWxvZ1R5cGUpIHsKICAgICAgICAgICAgY2FzZSAnYWRkJzoKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBjcmVhdGVBdXRob3JpdHkodGhpcy5mb3JtKQogICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfIScKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKQogICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgY2FzZSAnZWRpdCc6CiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdXBkYXRlQXV0aG9yaXR5KHRoaXMuZm9ybSkKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOaIkOWKnyEnCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCkKICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGNhc2UgJ2NvcHknOiB7CiAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgICAgIGF1dGhvcml0eTogewogICAgICAgICAgICAgICAgICBhdXRob3JpdHlJZDogJ3N0cmluZycsCiAgICAgICAgICAgICAgICAgIGF1dGhvcml0eU5hbWU6ICdzdHJpbmcnLAogICAgICAgICAgICAgICAgICBkYXRhdXRob3JpdHlJZDogW10sCiAgICAgICAgICAgICAgICAgIHBhcmVudElkOiAnc3RyaW5nJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9sZEF1dGhvcml0eUlkOiAwCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGRhdGEuYXV0aG9yaXR5LmF1dGhvcml0eUlkID0gdGhpcy5mb3JtLmF1dGhvcml0eUlkCiAgICAgICAgICAgICAgZGF0YS5hdXRob3JpdHkuYXV0aG9yaXR5TmFtZSA9IHRoaXMuZm9ybS5hdXRob3JpdHlOYW1lCiAgICAgICAgICAgICAgZGF0YS5hdXRob3JpdHkucGFyZW50SWQgPSB0aGlzLmZvcm0ucGFyZW50SWQKICAgICAgICAgICAgICBkYXRhLmF1dGhvcml0eS5kYXRhQXV0aG9yaXR5SWQgPSB0aGlzLmNvcHlGb3JtLmRhdGFBdXRob3JpdHlJZAogICAgICAgICAgICAgIGRhdGEub2xkQXV0aG9yaXR5SWQgPSB0aGlzLmNvcHlGb3JtLmF1dGhvcml0eUlkCiAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgY29weUF1dGhvcml0eShkYXRhKQogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WkjeWItuaIkOWKn++8gScKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB0aGlzLmdldFRhYmxlRGF0YSgpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbml0Rm9ybSgpCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgc2V0T3B0aW9ucygpIHsKICAgICAgdGhpcy5BdXRob3JpdHlPcHRpb24gPSBbCiAgICAgICAgewogICAgICAgICAgYXV0aG9yaXR5SWQ6ICcwJywKICAgICAgICAgIGF1dGhvcml0eU5hbWU6ICfmoLnop5LoibInCiAgICAgICAgfQogICAgICBdCiAgICAgIHRoaXMuc2V0QXV0aG9yaXR5T3B0aW9ucyh0aGlzLnRhYmxlRGF0YSwgdGhpcy5BdXRob3JpdHlPcHRpb24sIGZhbHNlKQogICAgfSwKICAgIHNldEF1dGhvcml0eU9wdGlvbnMoQXV0aG9yaXR5RGF0YSwgb3B0aW9uc0RhdGEsIGRpc2FibGVkKSB7CiAgICAgIHRoaXMuZm9ybS5hdXRob3JpdHlJZCA9IFN0cmluZyh0aGlzLmZvcm0uYXV0aG9yaXR5SWQpCiAgICAgIEF1dGhvcml0eURhdGEgJiYKICAgICAgICBBdXRob3JpdHlEYXRhLm1hcChpdGVtID0+IHsKICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHsKICAgICAgICAgICAgICBhdXRob3JpdHlJZDogaXRlbS5hdXRob3JpdHlJZCwKICAgICAgICAgICAgICBhdXRob3JpdHlOYW1lOiBpdGVtLmF1dGhvcml0eU5hbWUsCiAgICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkIHx8IGl0ZW0uYXV0aG9yaXR5SWQgPT09IHRoaXMuZm9ybS5hdXRob3JpdHlJZCwKICAgICAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNldEF1dGhvcml0eU9wdGlvbnMoCiAgICAgICAgICAgICAgaXRlbS5jaGlsZHJlbiwKICAgICAgICAgICAgICBvcHRpb24uY2hpbGRyZW4sCiAgICAgICAgICAgICAgZGlzYWJsZWQgfHwgaXRlbS5hdXRob3JpdHlJZCA9PT0gdGhpcy5mb3JtLmF1dGhvcml0eUlkCiAgICAgICAgICAgICkKICAgICAgICAgICAgb3B0aW9uc0RhdGEucHVzaChvcHRpb24pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBvcHRpb24gPSB7CiAgICAgICAgICAgICAgYXV0aG9yaXR5SWQ6IGl0ZW0uYXV0aG9yaXR5SWQsCiAgICAgICAgICAgICAgYXV0aG9yaXR5TmFtZTogaXRlbS5hdXRob3JpdHlOYW1lLAogICAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBpdGVtLmF1dGhvcml0eUlkID09PSB0aGlzLmZvcm0uYXV0aG9yaXR5SWQKICAgICAgICAgICAgfQogICAgICAgICAgICBvcHRpb25zRGF0YS5wdXNoKG9wdGlvbikKICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwKICAgIC8vIOWinuWKoOinkuiJsgogICAgYWRkQXV0aG9yaXR5KHBhcmVudElkKSB7CiAgICAgIHRoaXMuaW5pdEZvcm0oKQogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+aWsOWinuinkuiJsicKICAgICAgdGhpcy5kaWFsb2dUeXBlID0gJ2FkZCcKICAgICAgdGhpcy5mb3JtLnBhcmVudElkID0gcGFyZW50SWQKICAgICAgdGhpcy5zZXRPcHRpb25zKCkKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICAvLyDnvJbovpHop5LoibIKICAgIGVkaXRBdXRob3JpdHkocm93KSB7CiAgICAgIHRoaXMuc2V0T3B0aW9ucygpCiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAn57yW6L6R6KeS6ImyJwogICAgICB0aGlzLmRpYWxvZ1R5cGUgPSAnZWRpdCcKICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5mb3JtKSB7CiAgICAgICAgdGhpcy5mb3JtW2tleV0gPSByb3dba2V5XQogICAgICB9CiAgICAgIHRoaXMuc2V0T3B0aW9ucygpCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["authority.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"authority.vue","sourceRoot":"src/view/superAdmin/authority","sourcesContent":["<template>\n  <div class=\"authority\">\n    <div class=\"button-box clearflex\">\n      <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-plus\" @click=\"addAuthority('0')\">新增角色</el-button>\n    </div>\n    <el-table\n      :data=\"tableData\"\n      :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\n      border\n      row-key=\"authorityId\"\n      stripe\n      style=\"width: 100%\"\n    >\n      <el-table-column label=\"角色id\" min-width=\"180\" prop=\"authorityId\" />\n      <el-table-column label=\"角色名称\" min-width=\"180\" prop=\"authorityName\" />\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"460\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"primary\" @click=\"opdendrawer(scope.row)\">设置权限</el-button>\n          <el-button\n            icon=\"el-icon-plus\"\n            size=\"mini\"\n            type=\"primary\"\n            @click=\"addAuthority(scope.row.authorityId)\"\n          >新增子角色</el-button>\n          <el-button\n            icon=\"el-icon-copy-document\"\n            size=\"mini\"\n            type=\"primary\"\n            @click=\"copyAuthority(scope.row)\"\n          >拷贝</el-button>\n          <el-button\n            icon=\"el-icon-edit\"\n            size=\"mini\"\n            type=\"primary\"\n            @click=\"editAuthority(scope.row)\"\n          >编辑</el-button>\n          <el-button\n            icon=\"el-icon-delete\"\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"deleteAuth(scope.row)\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 新增角色弹窗 -->\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogFormVisible\">\n      <el-form ref=\"authorityForm\" :model=\"form\" :rules=\"rules\">\n        <el-form-item label=\"父级角色\" prop=\"parentId\">\n          <el-cascader\n            v-model=\"form.parentId\"\n            :disabled=\"dialogType=='add'\"\n            :options=\"AuthorityOption\"\n            :props=\"{ checkStrictly: true,label:'authorityName',value:'authorityId',disabled:'disabled',emitPath:false}\"\n            :show-all-levels=\"false\"\n            filterable\n          />\n        </el-form-item>\n        <el-form-item label=\"角色ID\" prop=\"authorityId\">\n          <el-input v-model=\"form.authorityId\" :disabled=\"dialogType=='edit'\" autocomplete=\"off\" />\n        </el-form-item>\n        <el-form-item label=\"角色姓名\" prop=\"authorityName\">\n          <el-input v-model=\"form.authorityName\" autocomplete=\"off\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"closeDialog\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"enterDialog\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n    <el-drawer v-if=\"drawer\" :visible.sync=\"drawer\" :with-header=\"false\" size=\"40%\" title=\"角色配置\">\n      <el-tabs :before-leave=\"autoEnter\" class=\"role-box\" type=\"border-card\">\n        <el-tab-pane label=\"角色菜单\">\n          <Menus ref=\"menus\" :row=\"activeRow\" />\n        </el-tab-pane>\n        <el-tab-pane label=\"角色api\">\n          <apis ref=\"apis\" :row=\"activeRow\" />\n        </el-tab-pane>\n        <el-tab-pane label=\"资源权限\">\n          <Datas ref=\"datas\" :authority=\"tableData\" :row=\"activeRow\" />\n        </el-tab-pane>\n      </el-tabs>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\n// 获取列表内容封装在mixins内部  getTableData方法 初始化已封装完成\n\nimport {\n  getAuthorityList,\n  deleteAuthority,\n  createAuthority,\n  updateAuthority,\n  copyAuthority\n} from '@/api/authority'\n\nimport Menus from '@/view/superAdmin/authority/components/menus'\nimport Apis from '@/view/superAdmin/authority/components/apis'\nimport Datas from '@/view/superAdmin/authority/components/datas'\n\nimport infoList from '@/mixins/infoList'\nexport default {\n  name: 'Authority',\n  components: {\n    Menus,\n    Apis,\n    Datas\n  },\n  mixins: [infoList],\n  data() {\n    var mustUint = (rule, value, callback) => {\n      if (!/^[0-9]*[1-9][0-9]*$/.test(value)) {\n        return callback(new Error('请输入正整数'))\n      }\n      return callback()\n    }\n\n    return {\n      AuthorityOption: [\n        {\n          authorityId: '0',\n          authorityName: '根角色'\n        }\n      ],\n      listApi: getAuthorityList,\n      drawer: false,\n      dialogType: 'add',\n      activeRow: {},\n      activeUserId: 0,\n      dialogTitle: '新增角色',\n      dialogFormVisible: false,\n      apiDialogFlag: false,\n      copyForm: {},\n      form: {\n        authorityId: '',\n        authorityName: '',\n        parentId: '0'\n      },\n      rules: {\n        authorityId: [\n          { required: true, message: '请输入角色ID', trigger: 'blur' },\n          { validator: mustUint, trigger: 'blur' }\n        ],\n        authorityName: [\n          { required: true, message: '请输入角色名', trigger: 'blur' }\n        ],\n        parentId: [\n          { required: true, message: '请选择请求方式', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  async created() {\n    this.pageSize = 999\n    await this.getTableData()\n  },\n  methods: {\n    autoEnter(activeName, oldActiveName) {\n      const paneArr = ['menus', 'apis', 'datas']\n      if (oldActiveName) {\n        if (this.$refs[paneArr[oldActiveName]].needConfirm) {\n          this.$refs[paneArr[oldActiveName]].enterAndNext()\n          this.$refs[paneArr[oldActiveName]].needConfirm = false\n        }\n      }\n    },\n    // 拷贝角色\n    copyAuthority(row) {\n      this.setOptions()\n      this.dialogTitle = '拷贝角色'\n      this.dialogType = 'copy'\n      for (const k in this.form) {\n        this.form[k] = row[k]\n      }\n      this.copyForm = row\n      this.dialogFormVisible = true\n    },\n    opdendrawer(row) {\n      this.drawer = true\n      this.activeRow = row\n    },\n    // 删除角色\n    deleteAuth(row) {\n      this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(async() => {\n          const res = await deleteAuthority({ authorityId: row.authorityId })\n          if (res.code === 0) {\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            })\n            if (this.tableData.length === 1 && this.page > 1) {\n              this.page--\n            }\n            this.getTableData()\n          }\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          })\n        })\n    },\n    // 初始化表单\n    initForm() {\n      if (this.$refs.authorityForm) {\n        this.$refs.authorityForm.resetFields()\n      }\n      this.form = {\n        authorityId: '',\n        authorityName: '',\n        parentId: '0'\n      }\n    },\n    // 关闭窗口\n    closeDialog() {\n      this.initForm()\n      this.dialogFormVisible = false\n      this.apiDialogFlag = false\n    },\n    // 确定弹窗\n\n    async enterDialog() {\n      if (this.form.authorityId === '0') {\n        this.$message({\n          type: 'error',\n          message: '角色id不能为0'\n        })\n        return false\n      }\n      this.$refs.authorityForm.validate(async valid => {\n        if (valid) {\n          switch (this.dialogType) {\n            case 'add':\n              {\n                const res = await createAuthority(this.form)\n                if (res.code === 0) {\n                  this.$message({\n                    type: 'success',\n                    message: '添加成功!'\n                  })\n                  this.getTableData()\n                  this.closeDialog()\n                }\n              }\n              break\n            case 'edit':\n              {\n                const res = await updateAuthority(this.form)\n                if (res.code === 0) {\n                  this.$message({\n                    type: 'success',\n                    message: '添加成功!'\n                  })\n                  this.getTableData()\n                  this.closeDialog()\n                }\n              }\n              break\n            case 'copy': {\n              const data = {\n                authority: {\n                  authorityId: 'string',\n                  authorityName: 'string',\n                  datauthorityId: [],\n                  parentId: 'string'\n                },\n                oldAuthorityId: 0\n              }\n              data.authority.authorityId = this.form.authorityId\n              data.authority.authorityName = this.form.authorityName\n              data.authority.parentId = this.form.parentId\n              data.authority.dataAuthorityId = this.copyForm.dataAuthorityId\n              data.oldAuthorityId = this.copyForm.authorityId\n              const res = await copyAuthority(data)\n              if (res.code === 0) {\n                this.$message({\n                  type: 'success',\n                  message: '复制成功！'\n                })\n                this.getTableData()\n              }\n            }\n          }\n\n          this.initForm()\n          this.dialogFormVisible = false\n        }\n      })\n    },\n    setOptions() {\n      this.AuthorityOption = [\n        {\n          authorityId: '0',\n          authorityName: '根角色'\n        }\n      ]\n      this.setAuthorityOptions(this.tableData, this.AuthorityOption, false)\n    },\n    setAuthorityOptions(AuthorityData, optionsData, disabled) {\n      this.form.authorityId = String(this.form.authorityId)\n      AuthorityData &&\n        AuthorityData.map(item => {\n          if (item.children && item.children.length) {\n            const option = {\n              authorityId: item.authorityId,\n              authorityName: item.authorityName,\n              disabled: disabled || item.authorityId === this.form.authorityId,\n              children: []\n            }\n            this.setAuthorityOptions(\n              item.children,\n              option.children,\n              disabled || item.authorityId === this.form.authorityId\n            )\n            optionsData.push(option)\n          } else {\n            const option = {\n              authorityId: item.authorityId,\n              authorityName: item.authorityName,\n              disabled: disabled || item.authorityId === this.form.authorityId\n            }\n            optionsData.push(option)\n          }\n        })\n    },\n    // 增加角色\n    addAuthority(parentId) {\n      this.initForm()\n      this.dialogTitle = '新增角色'\n      this.dialogType = 'add'\n      this.form.parentId = parentId\n      this.setOptions()\n      this.dialogFormVisible = true\n    },\n    // 编辑角色\n    editAuthority(row) {\n      this.setOptions()\n      this.dialogTitle = '编辑角色'\n      this.dialogType = 'edit'\n      for (const key in this.form) {\n        this.form[key] = row[key]\n      }\n      this.setOptions()\n      this.dialogFormVisible = true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.authority {\n  .el-input-number {\n    margin-left: 15px;\n    span {\n      display: none;\n    }\n  }\n  .button-box {\n    padding: 10px 20px;\n    .el-button {\n      float: right;\n    }\n  }\n}\n.role-box {\n  .el-tabs__content {\n    height: calc(100vh - 150px);\n    overflow: auto;\n  }\n}\n</style>\n"]}]}