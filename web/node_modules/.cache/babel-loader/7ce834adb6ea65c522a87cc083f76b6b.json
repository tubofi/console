{"remainingRequest":"E:\\console\\web\\node_modules\\babel-loader\\lib\\index.js!E:\\console\\web\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\console\\web\\src\\store\\module\\router.js","dependencies":[{"path":"E:\\console\\web\\src\\store\\module\\router.js","mtime":1629645124040},{"path":"E:\\console\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629645113861},{"path":"E:\\console\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":1629645113236},{"path":"E:\\console\\web\\node_modules\\eslint-loader\\index.js","mtime":1629645117451}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRTovY29uc29sZS93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBhc3luY1JvdXRlckhhbmRsZSB9IGZyb20gJ0AvdXRpbHMvYXN5bmNSb3V0ZXInOwppbXBvcnQgeyBhc3luY01lbnUgfSBmcm9tICdAL2FwaS9tZW51JzsKdmFyIHJvdXRlckxpc3QgPSBbXTsKCnZhciBmb3JtYXRSb3V0ZXIgPSBmdW5jdGlvbiBmb3JtYXRSb3V0ZXIocm91dGVzKSB7CiAgcm91dGVzICYmIHJvdXRlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmICgoIWl0ZW0uY2hpbGRyZW4gfHwgaXRlbS5jaGlsZHJlbi5ldmVyeShmdW5jdGlvbiAoY2gpIHsKICAgICAgcmV0dXJuIGNoLmhpZGRlbjsKICAgIH0pKSAmJiBpdGVtLm5hbWUgIT09ICc0MDQnKSB7CiAgICAgIHJvdXRlckxpc3QucHVzaCh7CiAgICAgICAgbGFiZWw6IGl0ZW0ubWV0YS50aXRsZSwKICAgICAgICB2YWx1ZTogaXRlbS5uYW1lCiAgICAgIH0pOwogICAgfQoKICAgIGlmIChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICBmb3JtYXRSb3V0ZXIoaXRlbS5jaGlsZHJlbik7CiAgICB9CiAgfSk7Cn07CgpleHBvcnQgdmFyIHJvdXRlciA9IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICBhc3luY1JvdXRlcnM6IFtdLAogICAgcm91dGVyTGlzdDogcm91dGVyTGlzdAogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRSb3V0ZXJMaXN0OiBmdW5jdGlvbiBzZXRSb3V0ZXJMaXN0KHN0YXRlLCByb3V0ZXJMaXN0KSB7CiAgICAgIHN0YXRlLnJvdXRlckxpc3QgPSByb3V0ZXJMaXN0OwogICAgfSwKICAgIC8vIOiuvue9ruWKqOaAgei3r+eUsQogICAgc2V0QXN5bmNSb3V0ZXI6IGZ1bmN0aW9uIHNldEFzeW5jUm91dGVyKHN0YXRlLCBhc3luY1JvdXRlcnMpIHsKICAgICAgc3RhdGUuYXN5bmNSb3V0ZXJzID0gYXN5bmNSb3V0ZXJzOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLy8g5LuO5ZCO5Y+w6I635Y+W5Yqo5oCB6Lev55SxCiAgICBTZXRBc3luY1JvdXRlcjogZnVuY3Rpb24gU2V0QXN5bmNSb3V0ZXIoX3JlZikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIGJhc2VSb3V0ZXIsIGFzeW5jUm91dGVyUmVzLCBhc3luY1JvdXRlcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICAgIGJhc2VSb3V0ZXIgPSBbewogICAgICAgICAgICAgICAgICBwYXRoOiAnL2xheW91dCcsCiAgICAgICAgICAgICAgICAgIG5hbWU6ICdsYXlvdXQnLAogICAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICd2aWV3L2xheW91dC9pbmRleC52dWUnLAogICAgICAgICAgICAgICAgICBtZXRhOiB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICflupXlsYJsYXlvdXQnCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXQogICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBhc3luY01lbnUoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgYXN5bmNSb3V0ZXJSZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKGFzeW5jUm91dGVyUmVzLmNvZGUgIT09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgYXN5bmNSb3V0ZXIgPSBhc3luY1JvdXRlclJlcy5kYXRhICYmIGFzeW5jUm91dGVyUmVzLmRhdGEubWVudXM7CiAgICAgICAgICAgICAgICBhc3luY1JvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgcGF0aDogJzQwNCcsCiAgICAgICAgICAgICAgICAgIG5hbWU6ICc0MDQnLAogICAgICAgICAgICAgICAgICBoaWRkZW46IHRydWUsCiAgICAgICAgICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+i/t+i3r+S6hirjgIIqJwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICd2aWV3L2Vycm9yL2luZGV4LnZ1ZScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZm9ybWF0Um91dGVyKGFzeW5jUm91dGVyKTsKICAgICAgICAgICAgICAgIGJhc2VSb3V0ZXJbMF0uY2hpbGRyZW4gPSBhc3luY1JvdXRlcjsKICAgICAgICAgICAgICAgIGJhc2VSb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIHBhdGg6ICcqJywKICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICcvbGF5b3V0LzQwNCcKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYXN5bmNSb3V0ZXJIYW5kbGUoYmFzZVJvdXRlcik7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldEFzeW5jUm91dGVyJywgYmFzZVJvdXRlcik7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFJvdXRlckxpc3QnLCByb3V0ZXJMaXN0KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgLy8g6I635Y+W5Yqo5oCB6Lev55SxCiAgICBhc3luY1JvdXRlcnM6IGZ1bmN0aW9uIGFzeW5jUm91dGVycyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuYXN5bmNSb3V0ZXJzOwogICAgfSwKICAgIHJvdXRlckxpc3Q6IGZ1bmN0aW9uIHJvdXRlckxpc3Qoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnJvdXRlckxpc3Q7CiAgICB9LAogICAgZGVmYXVsdFJvdXRlcjogZnVuY3Rpb24gZGVmYXVsdFJvdXRlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuZGVmYXVsdFJvdXRlcjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["E:/console/web/src/store/module/router.js"],"names":["asyncRouterHandle","asyncMenu","routerList","formatRouter","routes","map","item","children","every","ch","hidden","name","push","label","meta","title","value","length","router","namespaced","state","asyncRouters","mutations","setRouterList","setAsyncRouter","actions","SetAsyncRouter","commit","baseRouter","path","component","asyncRouterRes","code","asyncRouter","data","menus","redirect","getters","defaultRouter"],"mappings":"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","sourcesContent":["import { asyncRouterHandle } from '@/utils/asyncRouter'\r\n\r\nimport { asyncMenu } from '@/api/menu'\r\n\r\nconst routerList = []\r\nconst formatRouter = (routes) => {\r\n  routes && routes.map(item => {\r\n    if ((!item.children || item.children.every(ch => ch.hidden)) && item.name !== '404') {\r\n      routerList.push({ label: item.meta.title, value: item.name })\r\n    }\r\n    if (item.children && item.children.length > 0) {\r\n      formatRouter(item.children)\r\n    }\r\n  })\r\n}\r\n\r\nexport const router = {\r\n  namespaced: true,\r\n  state: {\r\n    asyncRouters: [],\r\n    routerList: routerList\r\n  },\r\n  mutations: {\r\n    setRouterList(state, routerList) {\r\n      state.routerList = routerList\r\n    },\r\n    // 设置动态路由\r\n    setAsyncRouter(state, asyncRouters) {\r\n      state.asyncRouters = asyncRouters\r\n    }\r\n  },\r\n  actions: {\r\n    // 从后台获取动态路由\r\n    async SetAsyncRouter({ commit }) {\r\n      const baseRouter = [{\r\n        path: '/layout',\r\n        name: 'layout',\r\n        component: 'view/layout/index.vue',\r\n        meta: {\r\n          title: '底层layout'\r\n        },\r\n        children: []\r\n      }]\r\n      const asyncRouterRes = await asyncMenu()\r\n      if (asyncRouterRes.code !== 0) {\r\n        return\r\n      }\r\n      const asyncRouter = asyncRouterRes.data && asyncRouterRes.data.menus\r\n      asyncRouter.push({\r\n        path: '404',\r\n        name: '404',\r\n        hidden: true,\r\n        meta: {\r\n          title: '迷路了*。*'\r\n        },\r\n        component: 'view/error/index.vue'\r\n      })\r\n      formatRouter(asyncRouter)\r\n      baseRouter[0].children = asyncRouter\r\n      baseRouter.push({\r\n        path: '*',\r\n        redirect: '/layout/404'\r\n      })\r\n      asyncRouterHandle(baseRouter)\r\n      commit('setAsyncRouter', baseRouter)\r\n      commit('setRouterList', routerList)\r\n      return true\r\n    }\r\n  },\r\n  getters: {\r\n    // 获取动态路由\r\n    asyncRouters(state) {\r\n      return state.asyncRouters\r\n    },\r\n    routerList(state) {\r\n      return state.routerList\r\n    },\r\n    defaultRouter(state) {\r\n      return state.defaultRouter\r\n    }\r\n  }\r\n}\r\n"]}]}