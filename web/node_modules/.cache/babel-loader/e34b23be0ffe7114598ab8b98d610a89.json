{"remainingRequest":"E:\\console\\web\\node_modules\\babel-loader\\lib\\index.js!E:\\console\\web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\console\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\console\\web\\src\\view\\superAdmin\\authority\\components\\datas.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\console\\web\\src\\view\\superAdmin\\authority\\components\\datas.vue","mtime":1625854608000},{"path":"E:\\console\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\console\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\console\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\console\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJFOi9jb25zb2xlL3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiRTovY29uc29sZS93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgc2V0RGF0YUF1dGhvcml0eSB9IGZyb20gJ0AvYXBpL2F1dGhvcml0eSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGF0YXMnLAogIHByb3BzOiB7CiAgICByb3c6IHsKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICBhdXRob3JpdHk6IHsKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgICB0eXBlOiBBcnJheQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF1dGhvcml0eXM6IFtdLAogICAgICBkYXRhQXV0aG9yaXR5SWQ6IFtdLAogICAgICBuZWVkQ29uZmlybTogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmF1dGhvcml0eXMgPSBbXTsKICAgIHRoaXMuZGF0YUF1dGhvcml0eUlkID0gW107CiAgICB0aGlzLnJvdW5kQXV0aG9yaXR5KHRoaXMuYXV0aG9yaXR5KTsKICAgIHRoaXMucm93LmRhdGFBdXRob3JpdHlJZCAmJiB0aGlzLnJvdy5kYXRhQXV0aG9yaXR5SWQubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHZhciBvYmogPSBfdGhpcy5hdXRob3JpdHlzICYmIF90aGlzLmF1dGhvcml0eXMuZmlsdGVyKGZ1bmN0aW9uIChhdSkgewogICAgICAgIHJldHVybiBhdS5hdXRob3JpdHlJZCA9PT0gaXRlbS5hdXRob3JpdHlJZDsKICAgICAgfSkgJiYgX3RoaXMuYXV0aG9yaXR5cy5maWx0ZXIoZnVuY3Rpb24gKGF1KSB7CiAgICAgICAgcmV0dXJuIGF1LmF1dGhvcml0eUlkID09PSBpdGVtLmF1dGhvcml0eUlkOwogICAgICB9KVswXTsKCiAgICAgIF90aGlzLmRhdGFBdXRob3JpdHlJZC5wdXNoKG9iaik7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOaatOmcsue7meWkluWxguS9v+eUqOeahOWIh+aNouaLpuaIque7n+S4gOaWueazlQogICAgZW50ZXJBbmROZXh0OiBmdW5jdGlvbiBlbnRlckFuZE5leHQoKSB7CiAgICAgIHRoaXMuYXV0aERhdGFFbnRlcigpOwogICAgfSwKICAgIGFsbDogZnVuY3Rpb24gYWxsKCkgewogICAgICB0aGlzLmRhdGFBdXRob3JpdHlJZCA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmF1dGhvcml0eXMpOwogICAgICB0aGlzLnJvdy5kYXRhQXV0aG9yaXR5SWQgPSB0aGlzLmRhdGFBdXRob3JpdHlJZDsKICAgICAgdGhpcy5uZWVkQ29uZmlybSA9IHRydWU7CiAgICB9LAogICAgc2VsZjogZnVuY3Rpb24gc2VsZigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmRhdGFBdXRob3JpdHlJZCA9IHRoaXMuYXV0aG9yaXR5cy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5hdXRob3JpdHlJZCA9PT0gX3RoaXMyLnJvdy5hdXRob3JpdHlJZDsKICAgICAgfSk7CiAgICAgIHRoaXMucm93LmRhdGFBdXRob3JpdHlJZCA9IHRoaXMuZGF0YUF1dGhvcml0eUlkOwogICAgICB0aGlzLm5lZWRDb25maXJtID0gdHJ1ZTsKICAgIH0sCiAgICBzZWxmQW5kQ2hpbGRyZW46IGZ1bmN0aW9uIHNlbGZBbmRDaGlsZHJlbigpIHsKICAgICAgdmFyIGFyckJveCA9IFtdOwogICAgICB0aGlzLmdldENoaWxkcmVuSWQodGhpcy5yb3csIGFyckJveCk7CiAgICAgIHRoaXMuZGF0YUF1dGhvcml0eUlkID0gdGhpcy5hdXRob3JpdHlzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBhcnJCb3guaW5kZXhPZihpdGVtLmF1dGhvcml0eUlkKSA+IC0xOwogICAgICB9KTsKICAgICAgdGhpcy5yb3cuZGF0YUF1dGhvcml0eUlkID0gdGhpcy5kYXRhQXV0aG9yaXR5SWQ7CiAgICAgIHRoaXMubmVlZENvbmZpcm0gPSB0cnVlOwogICAgfSwKICAgIGdldENoaWxkcmVuSWQ6IGZ1bmN0aW9uIGdldENoaWxkcmVuSWQocm93LCBhcnJCb3gpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBhcnJCb3gucHVzaChyb3cuYXV0aG9yaXR5SWQpOwogICAgICByb3cuY2hpbGRyZW4gJiYgcm93LmNoaWxkcmVuLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIF90aGlzMy5nZXRDaGlsZHJlbklkKGl0ZW0sIGFyckJveCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaPkOS6pAogICAgYXV0aERhdGFFbnRlcjogZnVuY3Rpb24gYXV0aERhdGFFbnRlcigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gc2V0RGF0YUF1dGhvcml0eShfdGhpczQucm93KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+i1hOa6kOiuvue9ruaIkOWKnycKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyAgIOW5s+mTuuinkuiJsgogICAgcm91bmRBdXRob3JpdHk6IGZ1bmN0aW9uIHJvdW5kQXV0aG9yaXR5KGF1dGhvcml0eXMpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBhdXRob3JpdHlzICYmIGF1dGhvcml0eXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgIG9iai5hdXRob3JpdHlJZCA9IGl0ZW0uYXV0aG9yaXR5SWQ7CiAgICAgICAgb2JqLmF1dGhvcml0eU5hbWUgPSBpdGVtLmF1dGhvcml0eU5hbWU7CgogICAgICAgIF90aGlzNS5hdXRob3JpdHlzLnB1c2gob2JqKTsKCiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgIF90aGlzNS5yb3VuZEF1dGhvcml0eShpdGVtLmNoaWxkcmVuKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vICAg6YCJ5oupCiAgICBzZWxlY3RBdXRob3JpdHk6IGZ1bmN0aW9uIHNlbGVjdEF1dGhvcml0eSgpIHsKICAgICAgdGhpcy5yb3cuZGF0YUF1dGhvcml0eUlkID0gdGhpcy5kYXRhQXV0aG9yaXR5SWQ7CiAgICAgIHRoaXMubmVlZENvbmZpcm0gPSB0cnVlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["datas.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"clearflex\" style=\"margin:18px\">\n      <el-button class=\"fl-right\" size=\"small\" type=\"primary\" @click=\"authDataEnter\">确 定</el-button>\n      <el-button class=\"fl-left\" size=\"small\" type=\"primary\" @click=\"all\">全选</el-button>\n      <el-button class=\"fl-left\" size=\"small\" type=\"primary\" @click=\"self\">本角色</el-button>\n      <el-button class=\"fl-left\" size=\"small\" type=\"primary\" @click=\"selfAndChildren\">本角色及子角色</el-button>\n    </div>\n    <el-checkbox-group v-model=\"dataAuthorityId\" @change=\"selectAuthority\">\n      <el-checkbox v-for=\"(item,key) in authoritys\" :key=\"key\" :label=\"item\">{{ item.authorityName }}</el-checkbox>\n    </el-checkbox-group>\n  </div>\n</template>\n\n<script>\nimport { setDataAuthority } from '@/api/authority'\nexport default {\n  name: 'Datas',\n  props: {\n    row: {\n      default: function() {\n        return {}\n      },\n      type: Object\n    },\n    authority: {\n      default: function() {\n        return {}\n      },\n      type: Array\n    }\n  },\n  data() {\n    return {\n      authoritys: [],\n      dataAuthorityId: [],\n      needConfirm: false\n    }\n  },\n  created() {\n    this.authoritys = []\n    this.dataAuthorityId = []\n    this.roundAuthority(this.authority)\n    this.row.dataAuthorityId && this.row.dataAuthorityId.map(item => {\n      const obj = this.authoritys && this.authoritys.filter(au => au.authorityId === item.authorityId) && this.authoritys.filter(au => au.authorityId === item.authorityId)[0]\n      this.dataAuthorityId.push(obj)\n    })\n  },\n  methods: {\n    // 暴露给外层使用的切换拦截统一方法\n    enterAndNext() {\n      this.authDataEnter()\n    },\n    all() {\n      this.dataAuthorityId = [...this.authoritys]\n      this.row.dataAuthorityId = this.dataAuthorityId\n      this.needConfirm = true\n    },\n    self() {\n      this.dataAuthorityId = this.authoritys.filter(item => item.authorityId === this.row.authorityId)\n      this.row.dataAuthorityId = this.dataAuthorityId\n      this.needConfirm = true\n    },\n    selfAndChildren() {\n      const arrBox = []\n      this.getChildrenId(this.row, arrBox)\n      this.dataAuthorityId = this.authoritys.filter(item => arrBox.indexOf(item.authorityId) > -1)\n      this.row.dataAuthorityId = this.dataAuthorityId\n      this.needConfirm = true\n    },\n    getChildrenId(row, arrBox) {\n      arrBox.push(row.authorityId)\n      row.children && row.children.map(item => {\n        this.getChildrenId(item, arrBox)\n      })\n    },\n    // 提交\n    async authDataEnter() {\n      const res = await setDataAuthority(this.row)\n      if (res.code === 0) {\n        this.$message({ type: 'success', message: '资源设置成功' })\n      }\n    },\n    //   平铺角色\n    roundAuthority(authoritys) {\n      authoritys && authoritys.map(item => {\n        const obj = {}\n        obj.authorityId = item.authorityId\n        obj.authorityName = item.authorityName\n        this.authoritys.push(obj)\n        if (item.children && item.children.length) {\n          this.roundAuthority(item.children)\n        }\n      })\n    },\n    //   选择\n    selectAuthority() {\n      this.row.dataAuthorityId = this.dataAuthorityId\n      this.needConfirm = true\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/view/superAdmin/authority/components"}]}